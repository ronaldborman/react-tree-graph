!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("clone"),require("d3-hierarchy")):"function"==typeof define&&define.amd?define(["react","clone","d3-hierarchy"],t):"object"==typeof exports?exports["react-tree-graph"]=t(require("react"),require("clone"),require("d3-hierarchy")):e["react-tree-graph"]=t(e.react,e.clone,e["d3-hierarchy"])}(this,function(e,t,r){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(9),u=n(l),c=r(10),f=r(0),d=n(f),h=r(8),y=n(h),m=r(3),g=n(m),b=r(4),P=n(b),k={data:d.default.PropTypes.object.isRequired,height:d.default.PropTypes.number.isRequired,width:d.default.PropTypes.number.isRequired,keyProp:d.default.PropTypes.string.isRequired,labelProp:d.default.PropTypes.string.isRequired,linkClass:d.default.PropTypes.string,linkClickHandler:d.default.PropTypes.func,margins:d.default.PropTypes.shape({bottom:d.default.PropTypes.number.isRequired,left:d.default.PropTypes.number.isRequired,right:d.default.PropTypes.number.isRequired,top:d.default.PropTypes.number.isRequired}).isRequired,nodeClass:d.default.PropTypes.string,nodeClickHandler:d.default.PropTypes.func,nodeOffset:d.default.PropTypes.number,nodeRadius:d.default.PropTypes.number},v={keyProp:"name",labelProp:"name",margins:{bottom:10,left:20,right:150,top:10},linkClass:"link",nodeClass:"node",nodeOffset:3.5,nodeRadius:5},w=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),p(t,[{key:"render",value:function(){var e=this,t=this.props.width-this.props.margins.left-this.props.margins.right,r=this.props.height-this.props.margins.top-this.props.margins.bottom,n=(0,c.hierarchy)((0,u.default)(this.props.data)),o=(0,c.tree)().size([r,t])(n),i=o.descendants(),s=o.links(),p=new y.default;return o[0].data.linkColor=o[0].data.linkColor||"black",p.parse(o).walk(function(t){var r=t.model;r.y+=e.props.margins.top,r.data.strokeColor=r.data.linkColor||r.parent.data.strokeColor}),d.default.createElement("svg",{height:this.props.height,width:this.props.width},s.map(function(t){return d.default.createElement(g.default,a({key:t.target.data[e.props.keyProp],className:e.props.linkClass,keyProp:e.props.keyProp,onClick:e.props.linkClickHandler,stroke:t.target.data.strokeColor,source:t.source,target:t.target},t.data))}),i.map(function(t){return d.default.createElement(P.default,a({key:t.data[e.props.keyProp],className:e.props.nodeClass,keyProp:e.props.keyProp,labelProp:e.props.labelProp,onClick:e.props.nodeClickHandler,offset:e.props.nodeOffset,radius:e.props.nodeRadius,x:t.x,y:t.y},t.data))}))}}]),t}(d.default.PureComponent);t.default=w,w.propTypes=k,w.defaultProps=v},function(e,t){},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n){return"M"+t+","+e+"C"+(t+n)/2+","+e+" "+(t+n)/2+","+r+" "+n+","+r}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(0),l=function(e){return e&&e.__esModule?e:{default:e}}(p),u={source:l.default.PropTypes.object.isRequired,target:l.default.PropTypes.object.isRequired,className:l.default.PropTypes.string,keyProp:l.default.PropTypes.string.isRequired,onClick:l.default.PropTypes.func},c=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleClick=r.handleClick.bind(r),r}return i(t,e),a(t,[{key:"handleClick",value:function(e){this.props.onClick&&this.props.onClick(this.props.source.data[this.props.keyProp],this.props.target.data[this.props.keyProp],e)}},{key:"render",value:function(){var e=s(this.props.source.x,this.props.source.y,this.props.target.x,this.props.target.y);return l.default.createElement("path",{className:this.props.className,d:e,onClick:this.handleClick,stroke:this.props.stroke})}}]),t}(l.default.PureComponent);t.default=c,c.propTypes=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),p=function(e){return e&&e.__esModule?e:{default:e}}(a),l={x:p.default.PropTypes.number.isRequired,y:p.default.PropTypes.number.isRequired,className:p.default.PropTypes.string,keyProp:p.default.PropTypes.string.isRequired,labelProp:p.default.PropTypes.string.isRequired,onClick:p.default.PropTypes.func,offset:p.default.PropTypes.number.isRequired,radius:p.default.PropTypes.number.isRequired},u=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleClick=r.handleClick.bind(r),r}return i(t,e),s(t,[{key:"handleClick",value:function(e){this.props.onClick&&this.props.onClick(this.props[this.props.keyProp],e)}},{key:"getTransform",value:function(){return"translate("+this.props.y+", "+this.props.x+")"}},{key:"render",value:function(){return p.default.createElement("g",{className:this.props.className,transform:this.getTransform(),onClick:this.handleClick},p.default.createElement("circle",{r:this.props.radius}),p.default.createElement("text",{dx:this.props.radius+.5,dy:this.props.offset},this.props[this.props.labelProp]))}}]),t}(p.default.PureComponent);t.default=u,u.propTypes=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(2);var n=r(1),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default},function(e,t){e.exports=function(){"use strict";function e(e,t,r){var n,o;for(n=0,o=t.length;n<o&&!(e(t[n],r)>0);n++);return n}return e}()},function(e,t){e.exports=function(){"use strict";function e(r,n){var o,i,s=n.length;return s>=2?(o=n.slice(0,s/2),i=n.slice(s/2,s),t(r,e(r,o),e(r,i))):n.slice()}function t(e,t,r){for(var n=[],o=t.length,i=r.length;o>0&&i>0;)e(t[0],r[0])<=0?(n.push(t.shift()),o--):(n.push(r.shift()),i--);return o>0?n.push.apply(n,t):n.push.apply(n,r),n}return e}()},function(e,t,r){var n,o;n=r(7),o=r(6),e.exports=function(){"use strict";function e(e){return function(){return e}}function t(e){e=e||{},this.config=e,this.config.childrenPropertyName=e.childrenPropertyName||"children",this.config.modelComparatorFn=e.modelComparatorFn}function r(e,t){return t.parent=e,e.children.push(t),t}function i(e,t){this.config=e,this.model=t,this.children=[]}function s(e){return"function"==typeof e.config.modelComparatorFn}function a(e,t,r){var n;if(!(t instanceof i))throw new TypeError("Child must be of type Node.");if(t.parent=e,e.model[e.config.childrenPropertyName]instanceof Array||(e.model[e.config.childrenPropertyName]=[]),s(e))n=o(e.config.modelComparatorFn,e.model[e.config.childrenPropertyName],t.model),e.model[e.config.childrenPropertyName].splice(n,0,t.model),e.children.splice(n,0,t);else if(void 0===r)e.model[e.config.childrenPropertyName].push(t.model),e.children.push(t);else{if(r<0||r>e.children.length)throw new Error("Invalid index.");e.model[e.config.childrenPropertyName].splice(r,0,t.model),e.children.splice(r,0,t)}return t}function p(){var e={};if(1===arguments.length?"function"==typeof arguments[0]?e.fn=arguments[0]:e.options=arguments[0]:2===arguments.length?"function"==typeof arguments[0]?(e.fn=arguments[0],e.ctx=arguments[1]):(e.options=arguments[0],e.fn=arguments[1]):(e.options=arguments[0],e.fn=arguments[1],e.ctx=arguments[2]),e.options=e.options||{},e.options.strategy||(e.options.strategy="pre"),!l[e.options.strategy])throw new Error("Unknown tree walk strategy. Valid strategies are 'pre' [default], 'post' and 'breadth'.");return e}var l;return l={},t.prototype.parse=function(e){var t,o,s;if(!(e instanceof Object))throw new TypeError("Model must be of type object.");if(s=new i(this.config,e),e[this.config.childrenPropertyName]instanceof Array)for(this.config.modelComparatorFn&&(e[this.config.childrenPropertyName]=n(this.config.modelComparatorFn,e[this.config.childrenPropertyName])),t=0,o=e[this.config.childrenPropertyName].length;t<o;t++)r(s,this.parse(e[this.config.childrenPropertyName][t]));return s},i.prototype.isRoot=function(){return void 0===this.parent},i.prototype.hasChildren=function(){return this.children.length>0},i.prototype.addChild=function(e){return a(this,e)},i.prototype.addChildAtIndex=function(e,t){if(s(this))throw new Error("Cannot add child at index when using a comparator function.");return a(this,e,t)},i.prototype.setIndex=function(e){if(s(this))throw new Error("Cannot set node index when using a comparator function.");if(this.isRoot()){if(0===e)return this;throw new Error("Invalid index.")}if(e<0||e>=this.parent.children.length)throw new Error("Invalid index.");var t=this.parent.children.indexOf(this);return this.parent.children.splice(e,0,this.parent.children.splice(t,1)[0]),this.parent.model[this.parent.config.childrenPropertyName].splice(e,0,this.parent.model[this.parent.config.childrenPropertyName].splice(t,1)[0]),this},i.prototype.getPath=function(){var e=[];return function t(r){e.unshift(r),r.isRoot()||t(r.parent)}(this),e},i.prototype.getIndex=function(){return this.isRoot()?0:this.parent.children.indexOf(this)},i.prototype.walk=function(){var e;e=p.apply(this,arguments),l[e.options.strategy].call(this,e.fn,e.ctx)},l.pre=function e(t,r){var n,o,i;for(i=t.call(r,this),n=0,o=this.children.length;n<o;n++){if(!1===i)return!1;i=e.call(this.children[n],t,r)}return i},l.post=function e(t,r){var n,o;for(n=0,o=this.children.length;n<o;n++)if(!1===e.call(this.children[n],t,r))return!1;return t.call(r,this)},l.breadth=function(e,t){var r=[this];!function n(){var o,i,s;if(0!==r.length){for(s=r.shift(),o=0,i=s.children.length;o<i;o++)r.push(s.children[o]);!1!==e.call(t,s)&&n()}}()},i.prototype.all=function(){var t,r=[];return t=p.apply(this,arguments),t.fn=t.fn||e(!0),l[t.options.strategy].call(this,function(e){t.fn.call(t.ctx,e)&&r.push(e)},t.ctx),r},i.prototype.first=function(){var t,r;return t=p.apply(this,arguments),t.fn=t.fn||e(!0),l[t.options.strategy].call(this,function(e){if(t.fn.call(t.ctx,e))return r=e,!1},t.ctx),r},i.prototype.drop=function(){var e;return this.isRoot()||(e=this.parent.children.indexOf(this),this.parent.children.splice(e,1),this.parent.model[this.config.childrenPropertyName].splice(e,1),this.parent=void 0,delete this.parent),this},t}()},function(e,r){e.exports=t},function(e,t){e.exports=r}])});